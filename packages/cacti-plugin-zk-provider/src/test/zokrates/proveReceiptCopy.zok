import "./stdlib/hashes/sha256/sha256Padded.zok" as sha256;
import "./stdlib/utils/casts/u16_to_u8array.zok" as cast;

const u32[8] accountHash = [
  922746979,
  805306424,
  889192501,
  1644167224,
  1644167225,
  1694498916,
  1711276086,
  1627390006
];

def main(private field prevAmount, private field transferAmount, private u16[24] userAddress) {
    u8[48] mut userAddressBytes = [0; 48];
    for u32 i in 0..24 {
        u8[2] part = cast(userAddress[i]);
        userAddressBytes[i*2] = part[0];
        userAddressBytes[i*2 + 1] = part[1];
    }
    u32[8] parsedAccountHash = sha256(userAddressBytes);
    assert(parsedAccountHash[0] == accountHash[0]);
    assert(parsedAccountHash[1] == accountHash[1]);
    assert(parsedAccountHash[2] == accountHash[2]);
    assert(parsedAccountHash[3] == accountHash[3]);
    assert(parsedAccountHash[4] == accountHash[4]);
    assert(parsedAccountHash[5] == accountHash[5]);
    assert(parsedAccountHash[6] == accountHash[6]);
    assert(parsedAccountHash[7] == accountHash[7]);
    assert(transferAmount > 0);
    assert(prevAmount - transferAmount >= 0);
    // parse and return hash for transactionHash+address+amount
}